<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:WorkshopOilApp.ViewModels"
             x:Class="WorkshopOilApp.Views.LoginPage"
             Title="Login"
             BackgroundColor="#F5F5F5"
             x:DataType="vm:LoginViewModel">

    <ContentPage.BindingContext>
        <vm:LoginViewModel />
    </ContentPage.BindingContext>

    <ScrollView>
        <VerticalStackLayout Padding="30" Spacing="25" VerticalOptions="Center">

            <!-- Logo / Title -->
            <Image Source="oil_icon.png" HeightRequest="120" HorizontalOptions="Center" />
            <Label Text="Workshop Oil Manager" 
                   FontSize="28" 
                   FontAttributes="Bold" 
                   HorizontalOptions="Center" 
                   TextColor="#1E293B" />

            <!-- Username -->
            <Frame BackgroundColor="White" CornerRadius="12" HasShadow="True" Padding="15">
                <Grid ColumnDefinitions="50,*">
                    <Label Text="&#xE7FD;" FontFamily="MaterialIcons" FontSize="24" TextColor="#64748B" VerticalOptions="Center" />
                    <Entry Placeholder="Username" 
                           Text="{Binding Username}"
                           Grid.Column="1" />
                </Grid>
            </Frame>

            <!-- Password -->
            <Frame BackgroundColor="White" CornerRadius="12" HasShadow="True" Padding="15">
                <Grid ColumnDefinitions="50,*">
                    <Label Text="&#xE897;" FontFamily="MaterialIcons" FontSize="24" TextColor="#64748B" VerticalOptions="Center" />
                    <Entry Placeholder="Password" 
                           IsPassword="True"
                           Text="{Binding Password}"
                           Grid.Column="1" />
                </Grid>
            </Frame>

            <!-- Error Message -->
            <Label Text="{Binding ErrorMessage}" 
                   TextColor="Red" 
                   FontSize="14" 
                   HorizontalOptions="Center"
                   IsVisible="{Binding HasError}" />

            <!-- Login Button -->
            <Button Text="Login" 
                    Command="{Binding LoginCommand}"
                    BackgroundColor="#3B82F6" 
                    TextColor="White"
                    CornerRadius="12"
                    HeightRequest="55"
                    FontSize="18"
                    FontAttributes="Bold"
                    IsEnabled="{Binding IsNotBusy}">
                <Button.Shadow>
                    <Shadow Brush="#3B82F6" Opacity="0.3" Radius="10" Offset="0,5"/>
                </Button.Shadow>
            </Button>

            <!-- Links -->
            <HorizontalStackLayout HorizontalOptions="Center" Spacing="20">
                <Label Text="Register" 
                       TextColor="#3B82F6" 
                       FontAttributes="Bold">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding GoToRegisterCommand}" />
                    </Label.GestureRecognizers>
                </Label>

                <Label Text="|" TextColor="#94A3B8" />

                <Label Text="Forgot Password?" 
                       TextColor="#3B82F6" 
                       FontAttributes="Bold">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding GoToForgotPasswordCommand}" />
                    </Label.GestureRecognizers>
                </Label>
            </HorizontalStackLayout>

            <!-- Loading Indicator -->
            <ActivityIndicator IsRunning="{Binding IsBusy}" 
                               IsVisible="{Binding IsBusy}"
                               Color="#3B82F6"
                               HorizontalOptions="Center" />
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>